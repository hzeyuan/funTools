<<<<<<< HEAD
{"version":3,"sources":["webpack:////Users/hdheart/Documents/GitHub/funTools/components/s-pull-scroll/index.vue?80f8","webpack:////Users/hdheart/Documents/GitHub/funTools/components/s-pull-scroll/index.vue?dfff","webpack:////Users/hdheart/Documents/GitHub/funTools/components/s-pull-scroll/index.vue?275a","webpack:////Users/hdheart/Documents/GitHub/funTools/components/s-pull-scroll/index.vue?239c","uni-app:///components/s-pull-scroll/index.vue","webpack:////Users/hdheart/Documents/GitHub/funTools/components/s-pull-scroll/index.vue?c81a","webpack:////Users/hdheart/Documents/GitHub/funTools/components/s-pull-scroll/index.vue?bc74"],"names":[],"mappings":"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AACA;AACA,mBADA;AAEA,mBAFA,EA1JA;;AA8JA;AACA,kBADA;AAEA,kBAFA,EA9JA;;AAkKA;AACA,oBAnKA;AAoKA;AACA;AACA,kBADA;AAEA,mBAFA,EArKA,EA5CA;;;AAsNA;AACA,OADA,iBACA;AACA;AACA,KAHA;AAIA,UAJA,oBAIA;AACA;AACA,KANA;AAOA,gBAPA,0BAOA;AACA;AACA,KATA;AAUA,gBAVA,0BAUA;AACA;AACA,KAZA,EAtNA;;AAoOA;AACA,UADA,oBACA;AACA;AACA,KAHA;AAIA,aAJA,uBAIA;AACA;AACA,KANA;AAOA,oBAPA,8BAOA;AACA;AACA,KATA;AAUA,uBAVA,iCAUA;AACA;AACA,KAZA;AAaA,mBAbA,6BAaA;AACA;AACA,KAfA;AAgBA,iBAhBA,2BAgBA;AACA;AACA,KAlBA;AAmBA,eAnBA,yBAmBA;AACA;AACA,KArBA;AAsBA,YAtBA,sBAsBA;AACA;AACA,KAxBA;AAyBA,UAzBA,oBAyBA;AACA;AACA,KA3BA;AA4BA,eA5BA,yBA4BA;AACA;AACA,KA9BA;AA+BA,aA/BA,uBA+BA;AACA;AACA,KAjCA;AAkCA,cAlCA,wBAkCA;AACA;AACA,KApCA;AAqCA,cArCA,wBAqCA;AACA;AACA,KAvCA,EApOA;;AA6QA;AACA,UADA,kBACA,KADA,EACA;AACA;AACA,KAHA;AAIA;AACA,UALA,kBAKA,CALA,EAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,KAzBA;AA0BA;AACA,cA3BA,sBA2BA,CA3BA,EA2BA;AACA;AACA,yCAFA,CAEA;AACA,yCAHA,CAGA;AACA,uCAJA,CAIA;AACA,sEALA,CAKA;AACA,8BANA,CAMA;AACA,KAlCA;AAmCA;AACA,aApCA,qBAoCA,CApCA,EAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;;AAEA,6CAZA,CAYA;AACA,sCAbA,CAaA;;AAEA,iDAfA,CAeA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDADA,CACA;AACA,kDAFA,CAEA;AACA;;AAEA;AACA;AACA,mCADA,CACA;AACA,4BAFA,CAEA;AACA;AACA;;AAEA,iCAjBA,CAiBA;;AAEA,mDAnBA,CAmBA;;AAEA;AACA;AACA;AACA,gCADA,CACA;AACA;AACA,sCAHA,CAGA;AACA,uCAJA,CAIA;AACA,yCALA,CAKA;AACA,+CANA,CAMA;AACA,qCAPA,CAOA;AACA;AACA,2DAVA,CAUA;AACA;AACA,WAZA,MAYA;AACA;AACA,gCADA,CACA;AACA;AACA,sCAHA,CAGA;AACA,uCAJA,CAIA;AACA,yCALA,CAKA;AACA,+CANA,CAMA;AACA,qCAPA,CAOA;AACA;AACA;AACA,0EADA,CACA;AACA,aAFA,MAEA;AACA,qCADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjHA;AAkHA;AACA,YAnHA,oBAmHA,CAnHA,EAmHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,iCAHA,CAGA;AACA,kCAJA,CAIA;AACA,qCALA,CAKA;AACA;AACA;AACA;AACA,OAbA,MAaA;AACA,oEADA,CACA;AACA;AACA;AACA;AACA,KAxIA;AAyIA,kBAzIA,0BAyIA,CAzIA,EAyIA;AACA;AACA;AACA;AACA;AACA,KA9IA;AA+IA;AACA,aAhJA,uBAgJA;AACA,iCADA,CACA;AACA,uBAFA,CAEA;AACA,KAnJA;AAoJA;AACA,kBArJA,4BAqJA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA5JA;AA6JA,YA7JA,oBA6JA,CA7JA,EA6JA;AACA;AACA;AACA;AACA,OAFA;AAGA,KAlKA;AAmKA;AACA,YApKA,oBAoKA,CApKA,EAoKA;AACA;AACA;AACA,cADA;AAEA,cAFA;;AAIA;AACA;AACA;AACA,+BADA;AAEA,+BAFA;;AAIA,OALA,MAKA;AACA;AACA,sCADA;AAEA,sCAFA;;AAIA,OALA,MAKA;AACA;AACA,sBADA;AAEA,sBAFA;;AAIA;AACA,KA3LA;AA4LA;AACA,mBA7LA,6BA6LA;AACA;AACA,KA/LA;AAgMA;AACA,mBAjMA,2BAiMA,MAjMA,EAiMA;AACA;AACA;AACA;AACA;AACA;AACA,KAvMA;AAwMA;AACA,uBAzMA,iCAyMA;AACA;AACA,2BADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA,eAFA,EAEA,sBAFA;AAGA;AACA,WAVA,EAUA,IAVA;AAWA,SAZA;AAaA;AACA,KA1NA;AA2NA;AACA,mBA5NA,6BA4NA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAVA,CAUA;AACA,0CAXA,CAWA;AACA,6BAZA,CAYA;AACA,8BAbA,CAaA;AACA,2CAdA,CAcA;AACA,KA3OA;AA4OA;AACA,mBA7OA,6BA6OA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAFA,CAEA;AACA,oCAHA,CAGA;AACA;AACA,uCADA,CACA;AACA,2CAFA,CAEA;AACA;AACA,aAJA,EAIA,GAJA;AAKA,WATA,EASA,IATA;AAUA,SAXA,MAWA;AACA;AACA,kCAFA,CAEA;AACA,gCAHA,CAGA;AACA,iCAJA,CAIA;AACA,qCALA,CAKA;AACA;AACA;AACA;AACA,KA1QA;AA2QA;AACA,iBA5QA,2BA4QA;AACA;AACA;AACA;AACA;AACA,KAjRA;AAkRA;AACA,iBAnRA,2BAmRA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA,KAzRA;AA0RA;AACA,mBA3RA,6BA2RA;AACA;AACA;AACA,+BAFA,CAEA;AACA,sBAHA,CAGA;AACA;AACA;AACA;AACA,KAnSA;AAoSA;AACA,iBArSA,yBAqSA,OArSA,EAqSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjTA;AAkTA,WAlTA,qBAkTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAlUA;AAmUA;AACA,WApUA,qBAoUA;AACA;AACA;AACA;AACA;AACA;AACA,KA1UA;AA2UA;AACA,SA5UA,mBA4UA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAvVA;AAwVA;AACA,SAzVA,mBAyVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjWA;AAkWA;AACA,UAnWA,oBAmWA;AACA;AACA;AACA;AACA,KAvWA,EA7QA;;AAsnBA,SAtnBA,qBAsnBA;AACA;AACA;AACA;AACA,4DADA,CACA;AACA,qEAFA,CAEA;AACA,6CAHA,CAGA;AACA,OALA;;AAOA,GA/nBA;AAgoBA,SAhoBA,qBAgoBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAFA;AAGA,GAzoBA;AA0oBA,eA1oBA,2BA0oBA;AACA;AACA,GA5oBA,E;;;;;;;;;;;;;ACrEA;AAAA;AAAA;AAAA;AAA4/C,CAAgB,63CAAG,EAAC,C;;;;;;;;;;;ACAhhD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/s-pull-scroll/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=5d568cd3&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/s-pull-scroll/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=5d568cd3&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = require(\"./back-top.png\")\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"s-pull-scroll\" :class=\"customClass\">\r\n    <scroll-view\r\n      :id=\"scrollId\"\r\n      class=\"s-pull-scroll-view\"\r\n      :class=\"{'is-fixed':fixed}\"\r\n      :style=\"{'padding-top':padTop,'padding-bottom':padBottom,'top':fixedTop,'bottom':fixedBottom}\"\r\n      :scroll-top=\"scrollTop\"\r\n      :scroll-with-animation=\"false\"\r\n      :scroll-y=\"scrollAble\"\r\n      :enable-back-to-top=\"true\"\r\n      @scroll=\"scroll\"\r\n      @touchstart=\"touchstart\"\r\n      @touchmove=\"touchmove\"\r\n      @touchend=\"touchend\"\r\n      @touchcancel=\"touchend\"\r\n    >\r\n      <view :style=\"{'transform': translateY, 'transition': transition}\">\r\n        <view\r\n          class=\"s-pull-down-wrap\"\r\n          :class=\"[{'is-success': isShowDownTip && isDownSuccess},{'is-error': isShowDownTip && isDownError}]\"\r\n          :style=\"{'height':downOffset+'rpx'}\"\r\n        >\r\n          <view\r\n            class=\"s-pull-loading-icon\"\r\n            v-if=\"!isShowDownTip\"\r\n            :class=\"{'s-pull-loading-rotate':isDownLoading}\"\r\n            :style=\"{'transform':downRotate}\"\r\n          ></view>\r\n          <view>{{downText}}</view>\r\n        </view>\r\n\r\n        <slot></slot>\r\n\r\n        <view v-if=\"isUpLoading\" class=\"s-pull-up-wrap\">\r\n          <view class=\"s-pull-loading-icon s-pull-loading-rotate\"></view>\r\n          <view>{{upLoadingText}}</view>\r\n        </view>\r\n\r\n        <slot name=\"empty\" v-if=\"isEmpty && showEmpty\">\r\n          <view class=\"s-pull-tip-wrap\" v-if=\"emptyText\">{{emptyText}}</view>\r\n        </slot>\r\n\r\n        <slot name=\"up-error\" v-else-if=\"isUpError && showUpError\">\r\n          <view class=\"s-pull-tip-wrap\" v-if=\"upErrorText\" @click=\"onUpErrorClick\">{{upErrorText}}</view>\r\n        </slot>\r\n        <slot name=\"up-finish\" v-else-if=\"isUpFinish && showUpFinish\">\r\n          <view class=\"s-pull-tip-wrap\" v-if=\"upFinishText\">{{upFinishText}}</view>\r\n        </slot>\r\n      </view>\r\n    </scroll-view>\r\n    <!-- 回到顶部按钮 (fixed元素,需写在scroll-view外面,防止滚动的时候抖动)-->\r\n    <view\r\n      class=\"s-pull-back-top\"\r\n      v-if=\"backTop\"\r\n      :class=\"{'is-show':isShowBackTop}\"\r\n      @click=\"onBackTop\"\r\n    >\r\n      <slot name=\"backtop\">\r\n        <view class=\"default-back-top\">\r\n          <img src=\"./back-top.png\" />\r\n        </view>\r\n      </slot>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 's-pull-scroll',\r\n  data () {\r\n    Object.assign(this, {\r\n      pullType: '',\r\n      scrollRealTop: 0, // 滚动条的位置\r\n      preScrollY: 0,\r\n      clientNum: 0,\r\n      isExec: false,\r\n      scrollHeight: 0,\r\n      clientHeight: 0,\r\n      bodyHeight: 0,\r\n      windowTop: 0, // 可使用窗口的顶部位置\r\n      windowBottom: 0, // 可使用窗口的底部位置\r\n      page: 0,\r\n      startPoint: null,\r\n      lastPoint: null,\r\n      startTop: 0,\r\n      maxTouchmoveY: 0,\r\n      inTouchend: false,\r\n      moveTime: 0,\r\n      moveTimeDiff: 0,\r\n      movetype: 0,\r\n      isMoveDown: false\r\n    });\r\n    return {\r\n      scrollId: 's-pull-scroll-view-id-' + Math.random().toString(36).substr(2), // 随机生成mescroll的id(不能数字开头,否则找不到元素)\r\n      downHight: 0, // 下拉刷新: 容器高度\r\n      downRotate: 0, // 下拉刷新: 圆形进度条旋转的角度\r\n      downText: '', // 下拉刷新: 提示的文本\r\n      isEmpty: false, // 是否显示空布局\r\n      isShowDownTip: false, // 下拉刷新提示结果\r\n      isDownSuccess: false, // 下拉刷新成功\r\n      isDownError: false, // 下拉刷新失败\r\n      isDownReset: false, // 下拉刷新: 是否显示重置的过渡动画\r\n      isDownLoading: false, // 下拉刷新: 是否显示加载中\r\n      isUpLoading: false, // 上拉加载: 是否显示 \"加载中...\"\r\n      isUpFinish: false, // 是否加载完毕\r\n      isUpError: false, // 是否上拉加载出错\r\n      isShowBackTop: false, // 是否显示回到顶部按钮\r\n      scrollAble: true, // 是否禁止下滑 (下拉时禁止,避免抖动)\r\n      scrollTop: 0 // 滚动条的位置\r\n    };\r\n  },\r\n  props: {\r\n    // class\r\n    customClass: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    // 是否通过fixed固定高度, 默认true\r\n    fixed: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 自定义头部时，头部高度(px)\r\n    headerHeight: {\r\n      type: [Number, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 距顶部(rpx)\r\n    top: {\r\n      type: [Number, Array, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 自定义底部时，底部高度(px)\r\n    footerHeight: {\r\n      type: [Number, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 距底部(rpx)\r\n    bottom: {\r\n      type: [Number, Array, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 是否阻止默认滚动\r\n    preventTouchmove: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 下拉时文案\r\n    pullingText: {\r\n      type: String,\r\n      default: '下拉刷新'\r\n    },\r\n    // 下拉释放时文案\r\n    loosingText: {\r\n      type: String,\r\n      default: '释放刷新'\r\n    },\r\n    // 下拉释放后文案\r\n    downLoadingText: {\r\n      type: String,\r\n      default: '正在刷新 ...'\r\n    },\r\n    // 上拉加载时文案\r\n    upLoadingText: {\r\n      type: String,\r\n      default: '加载中 ...'\r\n    },\r\n    // 是否显示空布局\r\n    showEmpty: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 刷新或加载数据为空时文案\r\n    emptyText: {\r\n      type: String,\r\n      default: '暂无数据'\r\n    },\r\n    // 是否显示下拉刷新成功\r\n    showDownSuccess: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 下拉刷新成功文案\r\n    downSuccessText: {\r\n      type: String,\r\n      default: '刷新成功'\r\n    },\r\n    // 是否显示下拉刷新失败\r\n    showDownError: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 下拉刷新失败文案\r\n    downErrorText: {\r\n      type: String,\r\n      default: '刷新失败'\r\n    },\r\n    // 是否显示上拉加载时失败\r\n    showUpError: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 上拉加载失败文案\r\n    upErrorText: {\r\n      type: String,\r\n      default: '加载失败，点击重新加载'\r\n    },\r\n    // 是否显示上拉加载数据全部完成\r\n    showUpFinish: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 上拉加载完毕文案\r\n    upFinishText: {\r\n      type: String,\r\n      default: '暂无更多了'\r\n    },\r\n    // 下拉配置\r\n    // 下拉回掉，参数为vm\r\n    pullDown: Function,\r\n    // 是否允许下拉刷新\r\n    enablePullDown: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    downOffset: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    downFps: {\r\n      type: Number,\r\n      default: 40\r\n    },\r\n    downMinAngle: {\r\n      type: Number,\r\n      default: 45\r\n    },\r\n    downInOffsetRate: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    downOutOffsetRate: {\r\n      type: Number,\r\n      default: 0.4\r\n    },\r\n    downStartTop: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    downBottomOffset: {\r\n      type: Number,\r\n      default: 20\r\n    },\r\n    // 上拉配置\r\n    // 上拉回掉，参数为vm\r\n    pullUp: Function,\r\n    // 是否允许上拉加载\r\n    enablePullUp: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    upOffset: {\r\n      type: Number,\r\n      default: 160\r\n    },\r\n    // 回到顶部\r\n    backTop: Boolean,\r\n    // 滚动距离大于多少rpx时触发\r\n    backTopOffset: {\r\n      type: Number,\r\n      default: 1000\r\n    }\r\n  },\r\n  watch: {\r\n    top () {\r\n      this.refreshClientHeight();\r\n    },\r\n    bottom () {\r\n      this.refreshClientHeight();\r\n    },\r\n    headerHeight () {\r\n      this.refreshClientHeight();\r\n    },\r\n    footerHeight () {\r\n      this.refreshClientHeight();\r\n    }\r\n  },\r\n  computed: {\r\n    numTop () {\r\n      return Number(this.headerHeight || 0) + this.upx2px(this.top);\r\n    },\r\n    numBottom () {\r\n      return Number(this.footerHeight || 0) + this.upx2px(this.bottom);\r\n    },\r\n    numBackTopOffset () {\r\n      return this.upx2px(this.backTopOffset);\r\n    },\r\n    numDownBottomOffset () {\r\n      return this.upx2px(this.downBottomOffset);\r\n    },\r\n    numDownStartTop () {\r\n      return this.upx2px(this.downStartTop);\r\n    },\r\n    numDownOffset () {\r\n      return this.upx2px(this.downOffset);\r\n    },\r\n    numUpOffset () {\r\n      return this.upx2px(this.upOffset);\r\n    },\r\n    fixedTop () {\r\n      return this.fixed ? (this.numTop + this.windowTop) + 'px' : 0;\r\n    },\r\n    padTop () {\r\n      return !this.fixed ? this.numTop + 'px' : 0;\r\n    },\r\n    fixedBottom () {\r\n      return this.fixed ? (this.numBottom + this.windowBottom) + 'px' : 0;\r\n    },\r\n    padBottom () {\r\n      return !this.fixed ? this.numBottom + 'px' : 0;\r\n    },\r\n    transition () {\r\n      return this.isDownReset ? 'transform 300ms' : '';\r\n    },\r\n    translateY () {\r\n      return this.downHight > 0 ? 'translateY(' + this.downHight + 'px)' : '';\r\n    }\r\n  },\r\n  methods: {\r\n    upx2px (value) {\r\n      return (Array.isArray(value) ? value : [value]).map(num => uni.upx2px(Number(num || 0))).reduce((a, b) => a + b) || 0;\r\n    },\r\n    // 注册列表滚动事件,用于下拉刷新\r\n    scroll (e) {\r\n      e = e.detail;\r\n      // 更新滚动条的位置\r\n      this.scrollRealTop = e.scrollTop;\r\n      // 更新滚动内容高度\r\n      this.scrollHeight = e.scrollHeight;\r\n      // 向上滑还是向下滑动\r\n      const isScrollUp = e.scrollTop - this.preScrollY > 0;\r\n      this.preScrollY = e.scrollTop;\r\n      // 上滑 && 检查并触发上拉\r\n      isScrollUp && this.triggerPullUp(true);\r\n      // 回到顶部功能\r\n      if (this.backTop) {\r\n        // 返回顶部按钮的显示隐藏\r\n        if (e.scrollTop >= this.numBackTopOffset) {\r\n          this.isShowBackTop = true;\r\n        } else {\r\n          this.isShowBackTop = false;\r\n        }\r\n      }\r\n    },\r\n    // 注册列表touchstart事件,用于下拉刷新\r\n    touchstart (e) {\r\n      if (!this.pullDown || !this.enablePullDown) return;\r\n      this.startPoint = this.getPoint(e); // 记录起点\r\n      this.startTop = this.scrollRealTop; // 记录此时的滚动条位置\r\n      this.lastPoint = this.startPoint; // 重置上次move的点\r\n      this.maxTouchmoveY = this.bodyHeight - this.numDownBottomOffset; // 手指触摸的最大范围(写在touchstart避免body获取高度为0的情况)\r\n      this.inTouchend = false; // 标记不是touchend\r\n    },\r\n    // 注册列表touchmove事件,用于下拉刷新\r\n    touchmove (e) {\r\n      if (!this.pullDown || !this.enablePullDown) return;\r\n      if (!this.startPoint) return;\r\n      // 节流\r\n      const t = Date.now();\r\n      if (this.moveTime && t - this.moveTime < this.moveTimeDiff) { // 小于节流时间,则不处理\r\n        return;\r\n      } else {\r\n        this.moveTime = t;\r\n        this.moveTimeDiff = 1000 / this.downFps;\r\n      }\r\n\r\n      let scrollRealTop = this.scrollRealTop; // 当前滚动条的距离\r\n      let curPoint = this.getPoint(e); // 当前点\r\n\r\n      let moveY = curPoint.y - this.startPoint.y; // 和起点比,移动的距离,大于0向下拉,小于0向上拉\r\n\r\n      // (向下拉&&在顶部) scroll-view在滚动时不会触发touchmove,当触顶/底/左/右时,才会触发touchmove\r\n      // scroll-view滚动到顶部时,scrollTop不一定为0; 在iOS的APP中scrollTop可能为负数,不一定和startTop相等\r\n      if (moveY > 0 && (scrollRealTop <= 0 || (scrollRealTop <= this.numDownStartTop && scrollRealTop === this.startTop))) {\r\n        // 可下拉的条件\r\n        if (this.pullDown && this.enablePullDown && !this.inTouchend && !this.isDownLoading && !this.isUpLoading) {\r\n          // 下拉的角度是否在配置的范围内\r\n          let x = Math.abs(this.lastPoint.x - curPoint.x);\r\n          let y = Math.abs(this.lastPoint.y - curPoint.y);\r\n          let z = Math.sqrt(x * x + y * y);\r\n          if (z !== 0) {\r\n            let angle = Math.asin(y / z) / Math.PI * 180; // 两点之间的角度,区间 [0,90]\r\n            if (angle < this.downMinAngle) return; // 如果小于配置的角度,则不往下执行下拉刷新\r\n          }\r\n\r\n          // 如果手指的位置超过配置的距离,则提前结束下拉,避免Webview嵌套导致touchend无法触发\r\n          if (this.maxTouchmoveY > 0 && curPoint.y >= this.maxTouchmoveY) {\r\n            this.inTouchend = true; // 标记执行touchend\r\n            this.touchend(); // 提前触发touchend\r\n            return;\r\n          }\r\n\r\n          this.preventDefault(e); // 阻止默认事件\r\n\r\n          let diff = curPoint.y - this.lastPoint.y; // 和上次比,移动的距离 (大于0向下,小于0向上)\r\n\r\n          // 下拉距离  < 指定距离\r\n          if (this.downHight < this.numDownOffset) {\r\n            if (this.movetype !== 1) {\r\n              this.movetype = 1; // 加入标记,保证只执行一次\r\n              // 下拉的距离进入offset范围内那一刻的回调\r\n              this.scrollAble = false; // 禁止下拉,避免抖动\r\n              this.isDownReset = false; // 不重置高度\r\n              this.isDownLoading = false; // 不显示加载中\r\n              this.downText = this.pullingText; // 设置文本\r\n              this.isMoveDown = true; // 标记下拉区域高度改变,在touchend重置回来\r\n            }\r\n            this.downHight += diff * this.downInOffsetRate; // 越往下,高度变化越小\r\n            // 指定距离  <= 下拉距离\r\n          } else {\r\n            if (this.movetype !== 2) {\r\n              this.movetype = 2; // 加入标记,保证只执行一次\r\n              // 下拉的距离大于offset那一刻的回调\r\n              this.scrollAble = false; // 禁止下拉,避免抖动\r\n              this.isDownReset = false; // 不重置高度\r\n              this.isDownLoading = false; // 不显示加载中\r\n              this.downText = this.loosingText; // 设置文本\r\n              this.isMoveDown = true; // 标记下拉区域高度改变,在touchend重置回来\r\n            }\r\n            if (diff > 0) { // 向下拉\r\n              this.downHight += Math.round(diff * this.downOutOffsetRate); // 越往下,高度变化越小\r\n            } else { // 向上收\r\n              this.downHight += diff; // 向上收回高度,则向上滑多少收多少高度\r\n            }\r\n          }\r\n          // 设置旋转角度\r\n          this.downRotate = 'rotate(' + 360 * (this.downHight / this.numDownOffset) + 'deg)';\r\n        }\r\n      }\r\n      // 记录本次移动的点\r\n      this.lastPoint = curPoint;\r\n    },\r\n    // 注册列表touchend事件,用于下拉刷新\r\n    touchend (e) {\r\n      if (!this.pullDown || !this.enablePullDown) return;\r\n      // 如果下拉区域高度已改变,则需重置回来\r\n      if (this.isMoveDown) {\r\n        if (this.downHight >= this.numDownOffset) {\r\n          // 符合触发刷新的条件\r\n          this.triggerPullDown();\r\n        } else {\r\n          // 不符合的话 则重置\r\n          this.downHight = 0;\r\n          this.scrollAble = true; // 开启下拉\r\n          this.isDownReset = true; // 重置高度\r\n          this.isDownLoading = false; // 不显示加载中\r\n        }\r\n        this.movetype = 0;\r\n        this.isMoveDown = false;\r\n      } else if (this.scrollRealTop === this.startTop) { // 到顶/左/右/底的滑动事件\r\n        const isScrollUp = this.getPoint(e).y - this.startPoint.y < 0; // 和起点比,移动的距离,大于0向下拉,小于0向上拉\r\n        // 上滑 && 检查并触发上拉\r\n        isScrollUp && this.triggerPullUp(true);\r\n      }\r\n    },\r\n    preventDefault (e) {\r\n      // 小程序不支持e.preventDefault\r\n      // app的bounce只能通过配置pages.json的style.app-plus.bounce为\"none\"来禁止\r\n      // cancelable:是否可以被禁用; defaultPrevented:是否已经被禁用\r\n      if (e && e.cancelable && !e.defaultPrevented) e.preventDefault();\r\n    },\r\n    // 点击回到顶部的按钮回调\r\n    onBackTop () {\r\n      this.isShowBackTop = false; // 回到顶部按钮需要先隐藏,再执行回到顶部,避免闪动\r\n      this.scrollTo(0); // 执行回到顶部\r\n    },\r\n    // 点击失败重新加载\r\n    onUpErrorClick () {\r\n      this.isUpError = false;\r\n      if (this.pullType === 'down') {\r\n        this.triggerPullDown();\r\n      } else if (this.pullType === 'up') {\r\n        this.triggerPullUp();\r\n      }\r\n    },\r\n    scrollTo (y) {\r\n      this.scrollTop = this.scrollRealTop;\r\n      this.$nextTick(() => {\r\n        this.scrollTop = y;\r\n      });\r\n    },\r\n    /* 根据点击滑动事件获取第一个手指的坐标 */\r\n    getPoint (e) {\r\n      if (!e) {\r\n        return {\r\n          x: 0,\r\n          y: 0\r\n        };\r\n      }\r\n      if (e.touches && e.touches[0]) {\r\n        return {\r\n          x: e.touches[0].pageX,\r\n          y: e.touches[0].pageY\r\n        };\r\n      } else if (e.changedTouches && e.changedTouches[0]) {\r\n        return {\r\n          x: e.changedTouches[0].pageX,\r\n          y: e.changedTouches[0].pageY\r\n        };\r\n      } else {\r\n        return {\r\n          x: e.clientX,\r\n          y: e.clientY\r\n        };\r\n      }\r\n    },\r\n    /* 滚动条到底部的距离 */\r\n    getScrollBottom () {\r\n      return this.scrollHeight - this.getClientHeight() - this.scrollRealTop;\r\n    },\r\n    /* 滚动容器的高度 */\r\n    getClientHeight (isReal) {\r\n      let h = this.clientHeight || 0;\r\n      if (h === 0 && isReal !== true) { // 未获取到容器的高度,可临时取body的高度 (可能会有误差)\r\n        h = this.bodyHeight;\r\n      }\r\n      return h;\r\n    },\r\n    /* 更新滚动区域的高度 (使内容不满屏和到底,都可继续翻页) */\r\n    refreshClientHeight () {\r\n      if (!this.isExec) {\r\n        this.isExec = true; // 避免多次获取\r\n        this.$nextTick(() => { // 确保dom已渲染\r\n          uni.createSelectorQuery().in(this).select('#' + this.scrollId).boundingClientRect(data => {\r\n            this.isExec = false;\r\n            if (data) {\r\n              this.clientHeight = data.height;\r\n            } else if (this.clientNum != 3) { // 极少部分情况,可能dom还未渲染完毕,递归获取,最多重试3次\r\n              this.clientNum = this.clientNum == 0 ? 1 : this.clientNum + 1;\r\n              setTimeout(() => {\r\n                this.refreshClientHeight();\r\n              }, this.clientNum * 100);\r\n            }\r\n          }).exec();\r\n        });\r\n      }\r\n    },\r\n    /* 显示下拉进度布局 */\r\n    showDownLoading () {\r\n      this.isEmpty = false;\r\n\r\n      this.isUpLoading = false;\r\n      this.isUpError = false;\r\n      this.isUpFinish = false;\r\n\r\n      this.isShowDownTip = false;\r\n      this.isDownSuccess = false;\r\n      this.isDownError = false;\r\n      this.isDownLoading = true; // 显示加载中\r\n      this.downHight = this.numDownOffset; // 更新下拉区域高度\r\n      this.scrollAble = true; // 开启下拉\r\n      this.isDownReset = true; // 重置高度\r\n      this.downText = this.downLoadingText; // 设置文本\r\n    },\r\n    /* 结束下拉刷新 */\r\n    hideDownLoading () {\r\n      if (this.isDownLoading) {\r\n        if (this.isDownSuccess && this.showDownSuccess) {\r\n          this.downText = this.downSuccessText;\r\n          this.isShowDownTip = true;\r\n        } else if (this.isDownError && this.showDownError) {\r\n          this.downText = this.downErrorText;\r\n          this.isShowDownTip = true;\r\n        }\r\n        if (this.isShowDownTip) {\r\n          setTimeout(() => {\r\n            this.downHight = 0;\r\n            this.isDownReset = true; // 重置高度\r\n            this.scrollHeight = 0;// 重置滚动区域,使数据不满屏时仍可检查触发翻页\r\n            setTimeout(() => {\r\n              this.scrollAble = true; // 开启下拉\r\n              this.isDownLoading = false; // 不显示加载中\r\n              this.isShowDownTip = false;\r\n            }, 300);\r\n          }, 1000);\r\n        } else {\r\n          this.downHight = 0;\r\n          this.isDownReset = true; // 重置高度\r\n          this.scrollHeight = 0;// 重置滚动区域,使数据不满屏时仍可检查触发翻页\r\n          this.scrollAble = true; // 开启下拉\r\n          this.isDownLoading = false; // 不显示加载中\r\n          this.isShowDownTip = false;\r\n        }\r\n      }\r\n    },\r\n    /* 显示上拉加载中 */\r\n    showUpLoading () {\r\n      this.isEmpty = false;\r\n      this.isUpError = false;\r\n      this.isUpFinish = false;\r\n      this.isUpLoading = true;\r\n    },\r\n    /* 结束上拉加载 */\r\n    hideUpLoading () {\r\n      if (this.isUpLoading) {\r\n        this.$nextTick(() => {\r\n          this.isUpLoading = false;\r\n        });\r\n      }\r\n    },\r\n    /* 触发下拉刷新 */\r\n    triggerPullDown () {\r\n      if (this.pullDown && this.enablePullDown && !this.isDownLoading && !this.isUpLoading) {\r\n        // 下拉加载中...\r\n        this.showDownLoading(); // 下拉刷新中...\r\n        this.page = 1; // 预先加一页\r\n        this.pullType = 'down';\r\n        this.pullDown && this.pullDown.call(this.$parent, this);\r\n      }\r\n    },\r\n    /* 触发上拉加载 */\r\n    triggerPullUp (isCheck) {\r\n      if (this.pullUp && this.enablePullUp && !this.isUpLoading && !this.isDownLoading && !this.isUpError && !this.isUpFinish) {\r\n        // 是否校验在底部; 默认不校验\r\n        if (isCheck && this.getScrollBottom() > this.numUpOffset) return;\r\n        // 上拉加载中...\r\n        this.showUpLoading();\r\n        this.page++;\r\n        this.pullType = 'up';\r\n        this.pullUp && this.pullUp.call(this.$parent, this);\r\n        // 更新容器的高度\r\n        this.refreshClientHeight();\r\n      }\r\n    },\r\n    refresh () {\r\n      this.page = 0;\r\n      this.isEmpty = false;\r\n      this.isDownSuccess = false;\r\n      this.isDownError = false;\r\n      this.isShowDownTip = false;\r\n      this.isUpError = false;\r\n      this.isUpFinish = false;\r\n      this.isDownLoading = false;\r\n      this.isUpLoading = false;\r\n      this.scrollTo(0);\r\n      if (this.pullDown && this.enablePullDown) {\r\n        this.triggerPullDown();\r\n      } else if (this.pullUp && this.enablePullUp) {\r\n        this.triggerPullUp();\r\n      }\r\n    },\r\n    /* 正常加载成功 */\r\n    success () {\r\n      if (this.isDownLoading) {\r\n        this.isDownSuccess = true;\r\n      }\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n    },\r\n    /* 加载失败 */\r\n    error () {\r\n      if (this.page > 0) {\r\n        this.page--;\r\n      }\r\n      if (this.isDownLoading) {\r\n        this.isDownError = true;\r\n      } else if (this.isUpLoading) {\r\n        this.isUpError = true;\r\n      }\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n    },\r\n    /* 没有数据 */\r\n    empty () {\r\n      if (this.isDownLoading) {\r\n        this.isDownSuccess = true;\r\n      }\r\n      this.isEmpty = true;\r\n      this.isUpFinish = true;\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n    },\r\n    /* 全部数据加载完毕 */\r\n    finish () {\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n      this.isUpFinish = true;\r\n    }\r\n  },\r\n  created () {\r\n    // 设置高度\r\n    uni.getSystemInfo({\r\n      success: (res) => {\r\n        if (res.windowTop) this.windowTop = res.windowTop; // 修正app和H5的top值\r\n        if (res.windowBottom) this.windowBottom = res.windowBottom; // 修正app和H5的bottom值\r\n        this.bodyHeight = res.windowHeight;// 使down的bottomOffset生效\r\n      }\r\n    });\r\n  },\r\n  mounted () {\r\n    // 设置容器的高度\r\n    this.refreshClientHeight = this.refreshClientHeight.bind(this);\r\n    uni.onWindowResize(this.refreshClientHeight);\r\n    this.refreshClientHeight();\r\n\r\n    this.$el && this.$el.addEventListener && this.$el.addEventListener('touchmove', e => {\r\n      this.preventTouchmove && e.preventDefault();\r\n    });\r\n  },\r\n  beforeDestroy () {\r\n    uni.offWindowResize(this.refreshClientHeight);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.s-pull-scroll {\r\n  height: 100%;\r\n  -webkit-overflow-scrolling: touch;\r\n\r\n  .s-pull-scroll-view {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow-y: auto;\r\n    box-sizing: border-box;\r\n  }\r\n  /* 定位的方式固定高度 */\r\n  .is-fixed {\r\n    z-index: 1;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    width: auto;\r\n    height: auto;\r\n  }\r\n  .s-pull-down-wrap,\r\n  .s-pull-up-wrap,\r\n  .s-pull-tip-wrap {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 28rpx;\r\n    color: #969799;\r\n  }\r\n  .s-pull-down-wrap {\r\n    position: absolute;\r\n    left: 0;\r\n    width: 100%;\r\n    transform: translateY(-100%);\r\n  }\r\n  .s-pull-up-wrap,\r\n  .s-pull-tip-wrap {\r\n    height: 100rpx;\r\n  }\r\n  /* 旋转loading */\r\n  .s-pull-loading-icon {\r\n    width: 30rpx;\r\n    height: 30rpx;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    border-radius: 50%;\r\n    border: 2rpx solid #969799;\r\n    border-bottom-color: transparent;\r\n    box-sizing: border-box;\r\n    &:first-child {\r\n      margin-right: 16rpx;\r\n    }\r\n  }\r\n  /* 旋转动画 */\r\n  .s-pull-loading-rotate {\r\n    animation: s-pull-loading-rotate 0.6s linear infinite;\r\n  }\r\n\r\n  @keyframes s-pull-loading-rotate {\r\n    0% {\r\n      transform: rotate(0deg);\r\n    }\r\n\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n\r\n  /* 回到顶部的按钮 */\r\n  .s-pull-back-top {\r\n    position: relative;\r\n    z-index: 99;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n    transition: opacity 0.3s linear;\r\n    &.is-show {\r\n      opacity: 1;\r\n      pointer-events: auto;\r\n    }\r\n  }\r\n  .default-back-top {\r\n    position: fixed;\r\n    right: 20rpx;\r\n    bottom: calc(var(--window-bottom) + 25rpx);\r\n\r\n    img {\r\n      width: 72rpx;\r\n      height: 72rpx;\r\n      border-radius: 50%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594908164252\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/components/s-pull-scroll/index.vue?2ecd","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/components/s-pull-scroll/index.vue?723d","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/components/s-pull-scroll/index.vue?747e","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/components/s-pull-scroll/index.vue?5d61","uni-app:///components/s-pull-scroll/index.vue","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/components/s-pull-scroll/index.vue?427b"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","m0","_self","_c","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","name","pullType","scrollRealTop","preScrollY","clientNum","isExec","scrollHeight","clientHeight","bodyHeight","windowTop","windowBottom","page","startPoint","lastPoint","startTop","maxTouchmoveY","inTouchend","moveTime","moveTimeDiff","movetype","isMoveDown","scrollId","Math","random","toString","substr","downHight","downRotate","downText","isEmpty","isShowDownTip","isDownSuccess","isDownError","isDownReset","isDownLoading","isUpLoading","isUpFinish","isUpError","isShowBackTop","scrollAble","scrollTop","props","customClass","type","String","default","fixed","Boolean","headerHeight","Number","top","Array","footerHeight","bottom","preventTouchmove","pullingText","loosingText","downLoadingText","upLoadingText","showEmpty","emptyText","showDownSuccess","downSuccessText","showDownError","downErrorText","showUpError","upErrorText","showUpFinish","upFinishText","pullDown","Function","enablePullDown","downOffset","downFps","downMinAngle","downInOffsetRate","downOutOffsetRate","downStartTop","downBottomOffset","pullUp","enablePullUp","upOffset","backTop","backTopOffset","watch","refreshClientHeight","computed","numTop","upx2px","numBottom","numBackTopOffset","numDownBottomOffset","numDownStartTop","numDownOffset","numUpOffset","fixedTop","padTop","fixedBottom","padBottom","transition","translateY","methods","isArray","value","map","scroll","e","detail","isScrollUp","triggerPullUp","touchstart","getPoint","touchmove","t","moveY","z","angle","curPoint","y","touchend","preventDefault","diff","round","triggerPullDown","cancelable","defaultPrevented","onBackTop","scrollTo","onUpErrorClick","$nextTick","touches","x","pageX","pageY","changedTouches","clientX","clientY","getScrollBottom","getClientHeight","h","isReal","uni","createSelectorQuery","in","setTimeout","showDownLoading","hideDownLoading","showUpLoading","hideUpLoading","call","$parent","isCheck","refresh","success","error","empty","finish","created","getSystemInfo","res","mounted","bind","onWindowResize","$el","addEventListener","beforeDestroy","offWindowResize"],"mappings":"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","file":"components/s-pull-scroll/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=5d568cd3&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/s-pull-scroll/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=5d568cd3&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = require(\"./back-top.png\")\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"s-pull-scroll\" :class=\"customClass\">\r\n    <scroll-view\r\n      :id=\"scrollId\"\r\n      class=\"s-pull-scroll-view\"\r\n      :class=\"{'is-fixed':fixed}\"\r\n      :style=\"{'padding-top':padTop,'padding-bottom':padBottom,'top':fixedTop,'bottom':fixedBottom}\"\r\n      :scroll-top=\"scrollTop\"\r\n      :scroll-with-animation=\"false\"\r\n      :scroll-y=\"scrollAble\"\r\n      :enable-back-to-top=\"true\"\r\n      @scroll=\"scroll\"\r\n      @touchstart=\"touchstart\"\r\n      @touchmove=\"touchmove\"\r\n      @touchend=\"touchend\"\r\n      @touchcancel=\"touchend\"\r\n    >\r\n      <view :style=\"{'transform': translateY, 'transition': transition}\">\r\n        <view\r\n          class=\"s-pull-down-wrap\"\r\n          :class=\"[{'is-success': isShowDownTip && isDownSuccess},{'is-error': isShowDownTip && isDownError}]\"\r\n          :style=\"{'height':downOffset+'rpx'}\"\r\n        >\r\n          <view\r\n            class=\"s-pull-loading-icon\"\r\n            v-if=\"!isShowDownTip\"\r\n            :class=\"{'s-pull-loading-rotate':isDownLoading}\"\r\n            :style=\"{'transform':downRotate}\"\r\n          ></view>\r\n          <view>{{downText}}</view>\r\n        </view>\r\n\r\n        <slot></slot>\r\n\r\n        <view v-if=\"isUpLoading\" class=\"s-pull-up-wrap\">\r\n          <view class=\"s-pull-loading-icon s-pull-loading-rotate\"></view>\r\n          <view>{{upLoadingText}}</view>\r\n        </view>\r\n\r\n        <slot name=\"empty\" v-if=\"isEmpty && showEmpty\">\r\n          <view class=\"s-pull-tip-wrap\" v-if=\"emptyText\">{{emptyText}}</view>\r\n        </slot>\r\n\r\n        <slot name=\"up-error\" v-else-if=\"isUpError && showUpError\">\r\n          <view class=\"s-pull-tip-wrap\" v-if=\"upErrorText\" @click=\"onUpErrorClick\">{{upErrorText}}</view>\r\n        </slot>\r\n        <slot name=\"up-finish\" v-else-if=\"isUpFinish && showUpFinish\">\r\n          <view class=\"s-pull-tip-wrap\" v-if=\"upFinishText\">{{upFinishText}}</view>\r\n        </slot>\r\n      </view>\r\n    </scroll-view>\r\n    <!-- 回到顶部按钮 (fixed元素,需写在scroll-view外面,防止滚动的时候抖动)-->\r\n    <view\r\n      class=\"s-pull-back-top\"\r\n      v-if=\"backTop\"\r\n      :class=\"{'is-show':isShowBackTop}\"\r\n      @click=\"onBackTop\"\r\n    >\r\n      <slot name=\"backtop\">\r\n        <view class=\"default-back-top\">\r\n          <img src=\"./back-top.png\" />\r\n        </view>\r\n      </slot>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 's-pull-scroll',\r\n  data () {\r\n    Object.assign(this, {\r\n      pullType: '',\r\n      scrollRealTop: 0, // 滚动条的位置\r\n      preScrollY: 0,\r\n      clientNum: 0,\r\n      isExec: false,\r\n      scrollHeight: 0,\r\n      clientHeight: 0,\r\n      bodyHeight: 0,\r\n      windowTop: 0, // 可使用窗口的顶部位置\r\n      windowBottom: 0, // 可使用窗口的底部位置\r\n      page: 0,\r\n      startPoint: null,\r\n      lastPoint: null,\r\n      startTop: 0,\r\n      maxTouchmoveY: 0,\r\n      inTouchend: false,\r\n      moveTime: 0,\r\n      moveTimeDiff: 0,\r\n      movetype: 0,\r\n      isMoveDown: false\r\n    });\r\n    return {\r\n      scrollId: 's-pull-scroll-view-id-' + Math.random().toString(36).substr(2), // 随机生成mescroll的id(不能数字开头,否则找不到元素)\r\n      downHight: 0, // 下拉刷新: 容器高度\r\n      downRotate: 0, // 下拉刷新: 圆形进度条旋转的角度\r\n      downText: '', // 下拉刷新: 提示的文本\r\n      isEmpty: false, // 是否显示空布局\r\n      isShowDownTip: false, // 下拉刷新提示结果\r\n      isDownSuccess: false, // 下拉刷新成功\r\n      isDownError: false, // 下拉刷新失败\r\n      isDownReset: false, // 下拉刷新: 是否显示重置的过渡动画\r\n      isDownLoading: false, // 下拉刷新: 是否显示加载中\r\n      isUpLoading: false, // 上拉加载: 是否显示 \"加载中...\"\r\n      isUpFinish: false, // 是否加载完毕\r\n      isUpError: false, // 是否上拉加载出错\r\n      isShowBackTop: false, // 是否显示回到顶部按钮\r\n      scrollAble: true, // 是否禁止下滑 (下拉时禁止,避免抖动)\r\n      scrollTop: 0 // 滚动条的位置\r\n    };\r\n  },\r\n  props: {\r\n    // class\r\n    customClass: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    // 是否通过fixed固定高度, 默认true\r\n    fixed: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 自定义头部时，头部高度(px)\r\n    headerHeight: {\r\n      type: [Number, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 距顶部(rpx)\r\n    top: {\r\n      type: [Number, Array, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 自定义底部时，底部高度(px)\r\n    footerHeight: {\r\n      type: [Number, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 距底部(rpx)\r\n    bottom: {\r\n      type: [Number, Array, String],\r\n      default () {\r\n        return 0;\r\n      }\r\n    },\r\n    // 是否阻止默认滚动\r\n    preventTouchmove: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 下拉时文案\r\n    pullingText: {\r\n      type: String,\r\n      default: '下拉刷新'\r\n    },\r\n    // 下拉释放时文案\r\n    loosingText: {\r\n      type: String,\r\n      default: '释放刷新'\r\n    },\r\n    // 下拉释放后文案\r\n    downLoadingText: {\r\n      type: String,\r\n      default: '正在刷新 ...'\r\n    },\r\n    // 上拉加载时文案\r\n    upLoadingText: {\r\n      type: String,\r\n      default: '加载中 ...'\r\n    },\r\n    // 是否显示空布局\r\n    showEmpty: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 刷新或加载数据为空时文案\r\n    emptyText: {\r\n      type: String,\r\n      default: '暂无数据'\r\n    },\r\n    // 是否显示下拉刷新成功\r\n    showDownSuccess: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 下拉刷新成功文案\r\n    downSuccessText: {\r\n      type: String,\r\n      default: '刷新成功'\r\n    },\r\n    // 是否显示下拉刷新失败\r\n    showDownError: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 下拉刷新失败文案\r\n    downErrorText: {\r\n      type: String,\r\n      default: '刷新失败'\r\n    },\r\n    // 是否显示上拉加载时失败\r\n    showUpError: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 上拉加载失败文案\r\n    upErrorText: {\r\n      type: String,\r\n      default: '加载失败，点击重新加载'\r\n    },\r\n    // 是否显示上拉加载数据全部完成\r\n    showUpFinish: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 上拉加载完毕文案\r\n    upFinishText: {\r\n      type: String,\r\n      default: '暂无更多了'\r\n    },\r\n    // 下拉配置\r\n    // 下拉回掉，参数为vm\r\n    pullDown: Function,\r\n    // 是否允许下拉刷新\r\n    enablePullDown: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    downOffset: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    downFps: {\r\n      type: Number,\r\n      default: 40\r\n    },\r\n    downMinAngle: {\r\n      type: Number,\r\n      default: 45\r\n    },\r\n    downInOffsetRate: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    downOutOffsetRate: {\r\n      type: Number,\r\n      default: 0.4\r\n    },\r\n    downStartTop: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    downBottomOffset: {\r\n      type: Number,\r\n      default: 20\r\n    },\r\n    // 上拉配置\r\n    // 上拉回掉，参数为vm\r\n    pullUp: Function,\r\n    // 是否允许上拉加载\r\n    enablePullUp: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    upOffset: {\r\n      type: Number,\r\n      default: 160\r\n    },\r\n    // 回到顶部\r\n    backTop: Boolean,\r\n    // 滚动距离大于多少rpx时触发\r\n    backTopOffset: {\r\n      type: Number,\r\n      default: 1000\r\n    }\r\n  },\r\n  watch: {\r\n    top () {\r\n      this.refreshClientHeight();\r\n    },\r\n    bottom () {\r\n      this.refreshClientHeight();\r\n    },\r\n    headerHeight () {\r\n      this.refreshClientHeight();\r\n    },\r\n    footerHeight () {\r\n      this.refreshClientHeight();\r\n    }\r\n  },\r\n  computed: {\r\n    numTop () {\r\n      return Number(this.headerHeight || 0) + this.upx2px(this.top);\r\n    },\r\n    numBottom () {\r\n      return Number(this.footerHeight || 0) + this.upx2px(this.bottom);\r\n    },\r\n    numBackTopOffset () {\r\n      return this.upx2px(this.backTopOffset);\r\n    },\r\n    numDownBottomOffset () {\r\n      return this.upx2px(this.downBottomOffset);\r\n    },\r\n    numDownStartTop () {\r\n      return this.upx2px(this.downStartTop);\r\n    },\r\n    numDownOffset () {\r\n      return this.upx2px(this.downOffset);\r\n    },\r\n    numUpOffset () {\r\n      return this.upx2px(this.upOffset);\r\n    },\r\n    fixedTop () {\r\n      return this.fixed ? (this.numTop + this.windowTop) + 'px' : 0;\r\n    },\r\n    padTop () {\r\n      return !this.fixed ? this.numTop + 'px' : 0;\r\n    },\r\n    fixedBottom () {\r\n      return this.fixed ? (this.numBottom + this.windowBottom) + 'px' : 0;\r\n    },\r\n    padBottom () {\r\n      return !this.fixed ? this.numBottom + 'px' : 0;\r\n    },\r\n    transition () {\r\n      return this.isDownReset ? 'transform 300ms' : '';\r\n    },\r\n    translateY () {\r\n      return this.downHight > 0 ? 'translateY(' + this.downHight + 'px)' : '';\r\n    }\r\n  },\r\n  methods: {\r\n    upx2px (value) {\r\n      return (Array.isArray(value) ? value : [value]).map(num => uni.upx2px(Number(num || 0))).reduce((a, b) => a + b) || 0;\r\n    },\r\n    // 注册列表滚动事件,用于下拉刷新\r\n    scroll (e) {\r\n      e = e.detail;\r\n      // 更新滚动条的位置\r\n      this.scrollRealTop = e.scrollTop;\r\n      // 更新滚动内容高度\r\n      this.scrollHeight = e.scrollHeight;\r\n      // 向上滑还是向下滑动\r\n      const isScrollUp = e.scrollTop - this.preScrollY > 0;\r\n      this.preScrollY = e.scrollTop;\r\n      // 上滑 && 检查并触发上拉\r\n      isScrollUp && this.triggerPullUp(true);\r\n      // 回到顶部功能\r\n      if (this.backTop) {\r\n        // 返回顶部按钮的显示隐藏\r\n        if (e.scrollTop >= this.numBackTopOffset) {\r\n          this.isShowBackTop = true;\r\n        } else {\r\n          this.isShowBackTop = false;\r\n        }\r\n      }\r\n    },\r\n    // 注册列表touchstart事件,用于下拉刷新\r\n    touchstart (e) {\r\n      if (!this.pullDown || !this.enablePullDown) return;\r\n      this.startPoint = this.getPoint(e); // 记录起点\r\n      this.startTop = this.scrollRealTop; // 记录此时的滚动条位置\r\n      this.lastPoint = this.startPoint; // 重置上次move的点\r\n      this.maxTouchmoveY = this.bodyHeight - this.numDownBottomOffset; // 手指触摸的最大范围(写在touchstart避免body获取高度为0的情况)\r\n      this.inTouchend = false; // 标记不是touchend\r\n    },\r\n    // 注册列表touchmove事件,用于下拉刷新\r\n    touchmove (e) {\r\n      if (!this.pullDown || !this.enablePullDown) return;\r\n      if (!this.startPoint) return;\r\n      // 节流\r\n      const t = Date.now();\r\n      if (this.moveTime && t - this.moveTime < this.moveTimeDiff) { // 小于节流时间,则不处理\r\n        return;\r\n      } else {\r\n        this.moveTime = t;\r\n        this.moveTimeDiff = 1000 / this.downFps;\r\n      }\r\n\r\n      let scrollRealTop = this.scrollRealTop; // 当前滚动条的距离\r\n      let curPoint = this.getPoint(e); // 当前点\r\n\r\n      let moveY = curPoint.y - this.startPoint.y; // 和起点比,移动的距离,大于0向下拉,小于0向上拉\r\n\r\n      // (向下拉&&在顶部) scroll-view在滚动时不会触发touchmove,当触顶/底/左/右时,才会触发touchmove\r\n      // scroll-view滚动到顶部时,scrollTop不一定为0; 在iOS的APP中scrollTop可能为负数,不一定和startTop相等\r\n      if (moveY > 0 && (scrollRealTop <= 0 || (scrollRealTop <= this.numDownStartTop && scrollRealTop === this.startTop))) {\r\n        // 可下拉的条件\r\n        if (this.pullDown && this.enablePullDown && !this.inTouchend && !this.isDownLoading && !this.isUpLoading) {\r\n          // 下拉的角度是否在配置的范围内\r\n          let x = Math.abs(this.lastPoint.x - curPoint.x);\r\n          let y = Math.abs(this.lastPoint.y - curPoint.y);\r\n          let z = Math.sqrt(x * x + y * y);\r\n          if (z !== 0) {\r\n            let angle = Math.asin(y / z) / Math.PI * 180; // 两点之间的角度,区间 [0,90]\r\n            if (angle < this.downMinAngle) return; // 如果小于配置的角度,则不往下执行下拉刷新\r\n          }\r\n\r\n          // 如果手指的位置超过配置的距离,则提前结束下拉,避免Webview嵌套导致touchend无法触发\r\n          if (this.maxTouchmoveY > 0 && curPoint.y >= this.maxTouchmoveY) {\r\n            this.inTouchend = true; // 标记执行touchend\r\n            this.touchend(); // 提前触发touchend\r\n            return;\r\n          }\r\n\r\n          this.preventDefault(e); // 阻止默认事件\r\n\r\n          let diff = curPoint.y - this.lastPoint.y; // 和上次比,移动的距离 (大于0向下,小于0向上)\r\n\r\n          // 下拉距离  < 指定距离\r\n          if (this.downHight < this.numDownOffset) {\r\n            if (this.movetype !== 1) {\r\n              this.movetype = 1; // 加入标记,保证只执行一次\r\n              // 下拉的距离进入offset范围内那一刻的回调\r\n              this.scrollAble = false; // 禁止下拉,避免抖动\r\n              this.isDownReset = false; // 不重置高度\r\n              this.isDownLoading = false; // 不显示加载中\r\n              this.downText = this.pullingText; // 设置文本\r\n              this.isMoveDown = true; // 标记下拉区域高度改变,在touchend重置回来\r\n            }\r\n            this.downHight += diff * this.downInOffsetRate; // 越往下,高度变化越小\r\n            // 指定距离  <= 下拉距离\r\n          } else {\r\n            if (this.movetype !== 2) {\r\n              this.movetype = 2; // 加入标记,保证只执行一次\r\n              // 下拉的距离大于offset那一刻的回调\r\n              this.scrollAble = false; // 禁止下拉,避免抖动\r\n              this.isDownReset = false; // 不重置高度\r\n              this.isDownLoading = false; // 不显示加载中\r\n              this.downText = this.loosingText; // 设置文本\r\n              this.isMoveDown = true; // 标记下拉区域高度改变,在touchend重置回来\r\n            }\r\n            if (diff > 0) { // 向下拉\r\n              this.downHight += Math.round(diff * this.downOutOffsetRate); // 越往下,高度变化越小\r\n            } else { // 向上收\r\n              this.downHight += diff; // 向上收回高度,则向上滑多少收多少高度\r\n            }\r\n          }\r\n          // 设置旋转角度\r\n          this.downRotate = 'rotate(' + 360 * (this.downHight / this.numDownOffset) + 'deg)';\r\n        }\r\n      }\r\n      // 记录本次移动的点\r\n      this.lastPoint = curPoint;\r\n    },\r\n    // 注册列表touchend事件,用于下拉刷新\r\n    touchend (e) {\r\n      if (!this.pullDown || !this.enablePullDown) return;\r\n      // 如果下拉区域高度已改变,则需重置回来\r\n      if (this.isMoveDown) {\r\n        if (this.downHight >= this.numDownOffset) {\r\n          // 符合触发刷新的条件\r\n          this.triggerPullDown();\r\n        } else {\r\n          // 不符合的话 则重置\r\n          this.downHight = 0;\r\n          this.scrollAble = true; // 开启下拉\r\n          this.isDownReset = true; // 重置高度\r\n          this.isDownLoading = false; // 不显示加载中\r\n        }\r\n        this.movetype = 0;\r\n        this.isMoveDown = false;\r\n      } else if (this.scrollRealTop === this.startTop) { // 到顶/左/右/底的滑动事件\r\n        const isScrollUp = this.getPoint(e).y - this.startPoint.y < 0; // 和起点比,移动的距离,大于0向下拉,小于0向上拉\r\n        // 上滑 && 检查并触发上拉\r\n        isScrollUp && this.triggerPullUp(true);\r\n      }\r\n    },\r\n    preventDefault (e) {\r\n      // 小程序不支持e.preventDefault\r\n      // app的bounce只能通过配置pages.json的style.app-plus.bounce为\"none\"来禁止\r\n      // cancelable:是否可以被禁用; defaultPrevented:是否已经被禁用\r\n      if (e && e.cancelable && !e.defaultPrevented) e.preventDefault();\r\n    },\r\n    // 点击回到顶部的按钮回调\r\n    onBackTop () {\r\n      this.isShowBackTop = false; // 回到顶部按钮需要先隐藏,再执行回到顶部,避免闪动\r\n      this.scrollTo(0); // 执行回到顶部\r\n    },\r\n    // 点击失败重新加载\r\n    onUpErrorClick () {\r\n      this.isUpError = false;\r\n      if (this.pullType === 'down') {\r\n        this.triggerPullDown();\r\n      } else if (this.pullType === 'up') {\r\n        this.triggerPullUp();\r\n      }\r\n    },\r\n    scrollTo (y) {\r\n      this.scrollTop = this.scrollRealTop;\r\n      this.$nextTick(() => {\r\n        this.scrollTop = y;\r\n      });\r\n    },\r\n    /* 根据点击滑动事件获取第一个手指的坐标 */\r\n    getPoint (e) {\r\n      if (!e) {\r\n        return {\r\n          x: 0,\r\n          y: 0\r\n        };\r\n      }\r\n      if (e.touches && e.touches[0]) {\r\n        return {\r\n          x: e.touches[0].pageX,\r\n          y: e.touches[0].pageY\r\n        };\r\n      } else if (e.changedTouches && e.changedTouches[0]) {\r\n        return {\r\n          x: e.changedTouches[0].pageX,\r\n          y: e.changedTouches[0].pageY\r\n        };\r\n      } else {\r\n        return {\r\n          x: e.clientX,\r\n          y: e.clientY\r\n        };\r\n      }\r\n    },\r\n    /* 滚动条到底部的距离 */\r\n    getScrollBottom () {\r\n      return this.scrollHeight - this.getClientHeight() - this.scrollRealTop;\r\n    },\r\n    /* 滚动容器的高度 */\r\n    getClientHeight (isReal) {\r\n      let h = this.clientHeight || 0;\r\n      if (h === 0 && isReal !== true) { // 未获取到容器的高度,可临时取body的高度 (可能会有误差)\r\n        h = this.bodyHeight;\r\n      }\r\n      return h;\r\n    },\r\n    /* 更新滚动区域的高度 (使内容不满屏和到底,都可继续翻页) */\r\n    refreshClientHeight () {\r\n      if (!this.isExec) {\r\n        this.isExec = true; // 避免多次获取\r\n        this.$nextTick(() => { // 确保dom已渲染\r\n          uni.createSelectorQuery().in(this).select('#' + this.scrollId).boundingClientRect(data => {\r\n            this.isExec = false;\r\n            if (data) {\r\n              this.clientHeight = data.height;\r\n            } else if (this.clientNum != 3) { // 极少部分情况,可能dom还未渲染完毕,递归获取,最多重试3次\r\n              this.clientNum = this.clientNum == 0 ? 1 : this.clientNum + 1;\r\n              setTimeout(() => {\r\n                this.refreshClientHeight();\r\n              }, this.clientNum * 100);\r\n            }\r\n          }).exec();\r\n        });\r\n      }\r\n    },\r\n    /* 显示下拉进度布局 */\r\n    showDownLoading () {\r\n      this.isEmpty = false;\r\n\r\n      this.isUpLoading = false;\r\n      this.isUpError = false;\r\n      this.isUpFinish = false;\r\n\r\n      this.isShowDownTip = false;\r\n      this.isDownSuccess = false;\r\n      this.isDownError = false;\r\n      this.isDownLoading = true; // 显示加载中\r\n      this.downHight = this.numDownOffset; // 更新下拉区域高度\r\n      this.scrollAble = true; // 开启下拉\r\n      this.isDownReset = true; // 重置高度\r\n      this.downText = this.downLoadingText; // 设置文本\r\n    },\r\n    /* 结束下拉刷新 */\r\n    hideDownLoading () {\r\n      if (this.isDownLoading) {\r\n        if (this.isDownSuccess && this.showDownSuccess) {\r\n          this.downText = this.downSuccessText;\r\n          this.isShowDownTip = true;\r\n        } else if (this.isDownError && this.showDownError) {\r\n          this.downText = this.downErrorText;\r\n          this.isShowDownTip = true;\r\n        }\r\n        if (this.isShowDownTip) {\r\n          setTimeout(() => {\r\n            this.downHight = 0;\r\n            this.isDownReset = true; // 重置高度\r\n            this.scrollHeight = 0;// 重置滚动区域,使数据不满屏时仍可检查触发翻页\r\n            setTimeout(() => {\r\n              this.scrollAble = true; // 开启下拉\r\n              this.isDownLoading = false; // 不显示加载中\r\n              this.isShowDownTip = false;\r\n            }, 300);\r\n          }, 1000);\r\n        } else {\r\n          this.downHight = 0;\r\n          this.isDownReset = true; // 重置高度\r\n          this.scrollHeight = 0;// 重置滚动区域,使数据不满屏时仍可检查触发翻页\r\n          this.scrollAble = true; // 开启下拉\r\n          this.isDownLoading = false; // 不显示加载中\r\n          this.isShowDownTip = false;\r\n        }\r\n      }\r\n    },\r\n    /* 显示上拉加载中 */\r\n    showUpLoading () {\r\n      this.isEmpty = false;\r\n      this.isUpError = false;\r\n      this.isUpFinish = false;\r\n      this.isUpLoading = true;\r\n    },\r\n    /* 结束上拉加载 */\r\n    hideUpLoading () {\r\n      if (this.isUpLoading) {\r\n        this.$nextTick(() => {\r\n          this.isUpLoading = false;\r\n        });\r\n      }\r\n    },\r\n    /* 触发下拉刷新 */\r\n    triggerPullDown () {\r\n      if (this.pullDown && this.enablePullDown && !this.isDownLoading && !this.isUpLoading) {\r\n        // 下拉加载中...\r\n        this.showDownLoading(); // 下拉刷新中...\r\n        this.page = 1; // 预先加一页\r\n        this.pullType = 'down';\r\n        this.pullDown && this.pullDown.call(this.$parent, this);\r\n      }\r\n    },\r\n    /* 触发上拉加载 */\r\n    triggerPullUp (isCheck) {\r\n      if (this.pullUp && this.enablePullUp && !this.isUpLoading && !this.isDownLoading && !this.isUpError && !this.isUpFinish) {\r\n        // 是否校验在底部; 默认不校验\r\n        if (isCheck && this.getScrollBottom() > this.numUpOffset) return;\r\n        // 上拉加载中...\r\n        this.showUpLoading();\r\n        this.page++;\r\n        this.pullType = 'up';\r\n        this.pullUp && this.pullUp.call(this.$parent, this);\r\n        // 更新容器的高度\r\n        this.refreshClientHeight();\r\n      }\r\n    },\r\n    refresh () {\r\n      this.page = 0;\r\n      this.isEmpty = false;\r\n      this.isDownSuccess = false;\r\n      this.isDownError = false;\r\n      this.isShowDownTip = false;\r\n      this.isUpError = false;\r\n      this.isUpFinish = false;\r\n      this.isDownLoading = false;\r\n      this.isUpLoading = false;\r\n      this.scrollTo(0);\r\n      if (this.pullDown && this.enablePullDown) {\r\n        this.triggerPullDown();\r\n      } else if (this.pullUp && this.enablePullUp) {\r\n        this.triggerPullUp();\r\n      }\r\n    },\r\n    /* 正常加载成功 */\r\n    success () {\r\n      if (this.isDownLoading) {\r\n        this.isDownSuccess = true;\r\n      }\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n    },\r\n    /* 加载失败 */\r\n    error () {\r\n      if (this.page > 0) {\r\n        this.page--;\r\n      }\r\n      if (this.isDownLoading) {\r\n        this.isDownError = true;\r\n      } else if (this.isUpLoading) {\r\n        this.isUpError = true;\r\n      }\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n    },\r\n    /* 没有数据 */\r\n    empty () {\r\n      if (this.isDownLoading) {\r\n        this.isDownSuccess = true;\r\n      }\r\n      this.isEmpty = true;\r\n      this.isUpFinish = true;\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n    },\r\n    /* 全部数据加载完毕 */\r\n    finish () {\r\n      this.hideDownLoading();\r\n      this.hideUpLoading();\r\n      this.isUpFinish = true;\r\n    }\r\n  },\r\n  created () {\r\n    // 设置高度\r\n    uni.getSystemInfo({\r\n      success: (res) => {\r\n        if (res.windowTop) this.windowTop = res.windowTop; // 修正app和H5的top值\r\n        if (res.windowBottom) this.windowBottom = res.windowBottom; // 修正app和H5的bottom值\r\n        this.bodyHeight = res.windowHeight;// 使down的bottomOffset生效\r\n      }\r\n    });\r\n  },\r\n  mounted () {\r\n    // 设置容器的高度\r\n    this.refreshClientHeight = this.refreshClientHeight.bind(this);\r\n    uni.onWindowResize(this.refreshClientHeight);\r\n    this.refreshClientHeight();\r\n\r\n    this.$el && this.$el.addEventListener && this.$el.addEventListener('touchmove', e => {\r\n      this.preventTouchmove && e.preventDefault();\r\n    });\r\n  },\r\n  beforeDestroy () {\r\n    uni.offWindowResize(this.refreshClientHeight);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.s-pull-scroll {\r\n  height: 100%;\r\n  -webkit-overflow-scrolling: touch;\r\n\r\n  .s-pull-scroll-view {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow-y: auto;\r\n    box-sizing: border-box;\r\n  }\r\n  /* 定位的方式固定高度 */\r\n  .is-fixed {\r\n    z-index: 1;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    width: auto;\r\n    height: auto;\r\n  }\r\n  .s-pull-down-wrap,\r\n  .s-pull-up-wrap,\r\n  .s-pull-tip-wrap {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 28rpx;\r\n    color: #969799;\r\n  }\r\n  .s-pull-down-wrap {\r\n    position: absolute;\r\n    left: 0;\r\n    width: 100%;\r\n    transform: translateY(-100%);\r\n  }\r\n  .s-pull-up-wrap,\r\n  .s-pull-tip-wrap {\r\n    height: 100rpx;\r\n  }\r\n  /* 旋转loading */\r\n  .s-pull-loading-icon {\r\n    width: 30rpx;\r\n    height: 30rpx;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    border-radius: 50%;\r\n    border: 2rpx solid #969799;\r\n    border-bottom-color: transparent;\r\n    box-sizing: border-box;\r\n    &:first-child {\r\n      margin-right: 16rpx;\r\n    }\r\n  }\r\n  /* 旋转动画 */\r\n  .s-pull-loading-rotate {\r\n    animation: s-pull-loading-rotate 0.6s linear infinite;\r\n  }\r\n\r\n  @keyframes s-pull-loading-rotate {\r\n    0% {\r\n      transform: rotate(0deg);\r\n    }\r\n\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n\r\n  /* 回到顶部的按钮 */\r\n  .s-pull-back-top {\r\n    position: relative;\r\n    z-index: 99;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n    transition: opacity 0.3s linear;\r\n    &.is-show {\r\n      opacity: 1;\r\n      pointer-events: auto;\r\n    }\r\n  }\r\n  .default-back-top {\r\n    position: fixed;\r\n    right: 20rpx;\r\n    bottom: calc(var(--window-bottom) + 25rpx);\r\n\r\n    img {\r\n      width: 72rpx;\r\n      height: 72rpx;\r\n      border-radius: 50%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}
>>>>>>> 30002169ecbde19ac2d1bc585ae20781127f4af2
