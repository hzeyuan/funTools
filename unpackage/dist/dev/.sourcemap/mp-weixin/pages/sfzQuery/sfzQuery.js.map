{"version":3,"sources":["uni-app:///main.js","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/pages/sfzQuery/sfzQuery.vue?ad14","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/pages/sfzQuery/sfzQuery.vue?256e","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/pages/sfzQuery/sfzQuery.vue?dd42","webpack:////Users/sharknet/Documents/HBuilderProjects/万能工具集/pages/sfzQuery/sfzQuery.vue?1f4e","uni-app:///pages/sfzQuery/sfzQuery.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","l0","_self","_c","__map","sfzInfo","item","index","m0","chineseFmt","$orig","__get_orig","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBAAmB,8BACnB,sBACA,+C,mDACAA,EAAWC,a;;;;2DCHX,kNACIC,EADJ,qMAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,8BACZ,aAAAF,E;;;;2GCtBf,4yC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,SAAS,SAASC,EAAMC,GAC7C,IAAIC,EAAKX,EAAIY,WAAWF,GACxB,MAAO,CACLG,MAAOb,EAAIc,WAAWL,GACtBE,GAAIA,OAIRX,EAAIe,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLf,GAAIA,MAKRgB,GAAmB,EACnBC,EAAkB,GACtBtB,EAAOuB,eAAgB,G;;;;2DCxBvB,44BAAs1B,eAAG,G;;;;kJC2Cz1B,CACA,KADA,WAEA,OACA,eACA,OACA,SACA,WACA,UACA,QACA,mBACA,cACA,gBAIA,SACA,OADA,SACA,GACA,yBAEA,SAJA,WAMA,sBACA,mBAMA,6BACA,gDACA,iDACA,iDACA,uBACA,oDACA,mBAEA,gBACA,qBAdA,aACA,oBAeA,WAxBA,SAwBA,GACA,gBACA,KACA,SACA,KACA,SACA,KACA,WACA,KACA,eACA,KACA,aACA,UADA,GAIA,OAvCA,SAuCA,GACA,WAgCA,cACA,uBAEA,OADA,WACA,uBAGA,aACA,yBACA,iBAEA,OADA,YACA,EAEA,qCACA,QACA,uBACA,sCACA,wBACA,mCACA,iDAQA,OAPA,6CACA,0BACA,yBACA,SACA,UACA,QACA,QACA,aAGA,OADA,YACA,EA5DA,kDACA,QACA,cACA,YACA,aACA,WACA,YACA,aAEA,UACA,wBACA,iBACA,aACA,SACA,SACA,SAEA,wBACA,mDAEA,uBAKA,OAJA,uBACA,cACA,UACA,iBACA,KACA,SAqCA,iBAEA,IADA,QACA,wBACA,mCACA,4BACA,yBACA,oBAEA,uBACA,+BACA,WACA,+BAEA,OADA,gCACA,WAGA,OAxHA,SAwHA,GACA,mBACA,OACA,OACA,OAEA,WACA,IAGA,EAHA,kBACA,iBACA,cAGA,WACA,SAEA,wBACA,0DACA,QACA,QACA,CACA,UACA,UAiBA,sBAhBA,SACA,UAEA,EADA,IACA,IAEA,MAEA,CACA,UAEA,EADA,IACA,IAEA,GAOA,SAEA,oBAGA,aAtKA,SAsKA,GACA,oEACA,2BAEA,OADA,kBACA,MAEA,WA5KA,SA4KA,KACA,OACA,+BACA,+BACA,+BACA,+BACA,+BACA,+BACA,+BACA,+BACA,gCACA,kCAEA,UACA,eACA,8BACA,kBAIA,YAhMA,WAgMA,WACA,8BACA,4BACA,uBACA,KAaA,OAZA,gBACA,oBACA,MACA,WACA,OACA,UAGA,kBACA,eACA,2BAEA,GAEA,kBAnNA,SAmNA,O","file":"pages/sfzQuery/sfzQuery.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/sfzQuery/sfzQuery.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./sfzQuery.vue?vue&type=template&id=511747a6&\"\nvar renderjs\nimport script from \"./sfzQuery.vue?vue&type=script&lang=js&\"\nexport * from \"./sfzQuery.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/sfzQuery/sfzQuery.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sfzQuery.vue?vue&type=template&id=511747a6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.sfzInfo, function(item, index) {\n    var m0 = _vm.chineseFmt(index)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sfzQuery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./sfzQuery.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<cu-custom :isBack=\"true\" bgColor=\"bg-gradual-blue\">\n\t\t\t<!-- <block slot=\"backText\">返回</block> -->\n\t\t\t<block slot=\"content\">身份证查询</block>\n\t\t</cu-custom>\n\t\t<view class=\"cu-form-group\">\n\t\t\t<i class=\"cuIcon-search padding-right\"></i>\n\t\t\t<input placeholder=\"请输入正确的身份证号\" name=\"input\" @input=\"setSfz\" />\n\t\t\t<button class=\"cu-btn bg-green shadow\" @tap=\"sfzQuery\">查询</button>\n\t\t</view>\n\t\t<view class=\"cu-bar bg-white solid-bottom margin-top\" v-if=\"showSfzInfo\">\n\t\t\t<view class=\"action\">\n\t\t\t\t<text class=\"cuIcon-title text-orange\"></text>\n\t\t\t\t身份证信息\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"cu-dialog\" v-if=\"showSfzInfo\">\n\t\t\t<view class=\"cu-list menu text-left solid-top\">\n\t\t\t\t<view class=\"cu-item\" v-for=\"(item, index) in sfzInfo\">\n\t\t\t\t\t<view class=\"content\">\n\t\t\t\t\t\t<text>{{ chineseFmt(index) }}:{{ item }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"cu-bar bg-white solid-bottom margin-top\">\n\t\t\t<view class=\"action\">\n\t\t\t\t<text class=\"cuIcon-title text-blue\"></text>身份证号码的编码规则：\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"padding\">\n\t\t\t<view class=\"bg-white\">\n\t\t\t\t<view style=\"padding-bottom: 0.5%;\"><span>1. 前6位是地址码，表示登记户口时所在地的行政区划代码，依照《中华人民共和国行政区划代码》国家标准（GB/T2260）的规定执行</span></view>\n\t\t\t\t<view style=\"padding-bottom: 0.5%;\"><span>2. 7到14位是出生年月日，采用YYYYMMDD格式</span></view>\n\t\t\t\t<view style=\"padding-bottom: 0.5%;\"><span>3. 15到17位是顺序码，表示在同一地址码所标识的区域范围内，对同年、同月、同日出生的人编订的顺序号，顺序码的奇数分配给男性，偶数分配给女性，即第17位奇数表示男性，偶数表示女性</span></view>\n\t\t\t\t<view style=\"padding-bottom: 0.5%;\"><span>4. 第18位是校验码，采用ISO 7064:1983, MOD 11-2校验字符系统</span></view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tshowSfzInfo: false,\n\t\t\tsfz: '',\n\t\t\tsfzInfo: {\n\t\t\t\tcity: '...',\n\t\t\t\tage: '...',\n\t\t\t\tsex: '男',\n\t\t\t\tbirth: '1999-01-01',\n\t\t\t\tshengxiao: '兔',\n\t\t\t\txingzuo: '天蝎'\n\t\t\t}\n\t\t};\n\t},\n\tmethods: {\n\t\tsetSfz(e) {\n\t\t\tthis.sfz = e.detail.value;\n\t\t},\n\t\tsfzQuery() {\n\t\t\t//效验身份证\n\t\t\tlet ck = new this.IDCard();\n\t\t\tif (!ck.check(this.sfz)) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '身份证格式不正确'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tuni.showLoading({title:'加载中',})\n\t\t\t\tthis.sfzInfo.birth = ck.year + '-' + ck.month + '-' + ck.day;\n\t\t\t\tthis.sfzInfo.age = this.getAge(this.sfzInfo.birth);\n\t\t\t\tthis.sfzInfo.shengxiao = this.getShengxiao(ck.year);\n\t\t\t\tthis.sfzInfo.sex = ck.sex\n\t\t\t\tthis.sfzInfo.xingzuo = this.getXingZuo(ck.month, ck.day);\n\t\t\t\tthis.getLocation()\n\t\t\t}\n\t\t\tuni.hideLoading()\n\t\t\tthis.showSfzInfo = true;\n\t\t},\n\t\tchineseFmt(name) {\n\t\t\tif (name == 'city') {\n\t\t\t\treturn '城市';\n\t\t\t} else if (name == 'age') {\n\t\t\t\treturn '年龄';\n\t\t\t} else if (name == 'sex') {\n\t\t\t\treturn '性别';\n\t\t\t} else if (name == 'birth') {\n\t\t\t\treturn '生日';\n\t\t\t} else if (name == 'shengxiao') {\n\t\t\t\treturn '生肖';\n\t\t\t} else if (name == 'xingzuo') {\n\t\t\t\treturn '星座';\n\t\t\t}\n\t\t},\n\t\tIDCard(ID) {\n\t\t\tvar me = this;\n\t\t\tthis.checkCode = new Array(1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2);\n\t\t\tthis.ID;\n\t\t\tthis.errNum = 0;\n\t\t\tthis.year = 0; //年\n\t\t\tthis.month = 0; // 月\n\t\t\tthis.day = 0; //日\n\t\t\tthis.sex = ''; //性别\n\t\t\tthis.city = ''; //城市\n\n\t\t\tthis.err = {\n\t\t\t\t1: '身份证校验不符合求和模11=1这个等式',\n\t\t\t\t2: '身份证最后一位校验位有误',\n\t\t\t\t3: '身份证位数不正确',\n\t\t\t\t4: '年份错误',\n\t\t\t\t5: '月份错误',\n\t\t\t\t6: '日错误'\n\t\t\t};\n\t\t\tthis.err_msg = function() {\n\t\t\t\treturn 0 !== this.errNum ? this.err[this.errNum] : null;\n\t\t\t};\n\t\t\tthis.check = function(ID) {\n\t\t\t\tconsole.log('xiaoyan');\n\t\t\t\tthis.errNum = 0;\n\t\t\t\tthis.ID = ID;\n\t\t\t\tconsole.log(ID);\n\t\t\t\tif (cardValidate()) {\n\t\t\t\t\treturn 0 === aiCheck() ? true : false;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\t\t\tfunction getNum(str) {\n\t\t\t\tvar re = /^[0]*([0-9]*)$/;\n\t\t\t\tstr.match(re);\n\t\t\t\treturn parseInt(RegExp.$1, 10);\n\t\t\t}\n\t\t\t//对身份证位数，出生日期，初步验证\n\t\t\tfunction cardValidate() {\n\t\t\t\tvar re = /^[0-9x]{15,18}$/i;\n\t\t\t\tif (!re.test(me.ID)) {\n\t\t\t\t\tme.errNum = 7;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (15 == me.ID.length || 18 == me.ID.length) {\n\t\t\t\t\tvar realLen = 0;\n\t\t\t\t\tif (18 == me.ID.length) realLen = 2;\n\t\t\t\t\tvar year = parseInt(me.ID.substr(6, 2 + realLen), 10);\n\t\t\t\t\tvar month = getNum(me.ID.substr(8 + realLen, 2));\n\t\t\t\t\tvar day = parseInt(me.ID.substr(10 + realLen, 2), 10);\n\t\t\t\t\tvar sex = parseInt(me.ID.substr(14 + realLen, 1), 10) % 2 === 0 ? '女' : '男';\n\t\t\t\t\tif (4 == year.length) if (year < 1900 || year > 2050) me.errNum = 4;\n\t\t\t\t\tif (month < 1 || month > 12) me.errNum = 5;\n\t\t\t\t\tif (day < 1 || day > 31) me.errNum = 6;\n\t\t\t\t\tme.year = year;\n\t\t\t\t\tme.month = month;\n\t\t\t\t\tme.day = day;\n\t\t\t\t\tme.sex = sex;\n\t\t\t\t\treturn 0 === me.errNum;\n\t\t\t\t} else {\n\t\t\t\t\tme.errNum = 3;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar aiCheck = function() {\n\t\t\t\tvar sum = 0;\n\t\t\t\tfor (var i = 1; i <= me.ID.length; i++) {\n\t\t\t\t\tvar ai = me.ID.substr(me.ID.length - i, 1);\n\t\t\t\t\tai = ai.toLowerCase() == 'x' ? 10 : ai;\n\t\t\t\t\tvar wi = Math.pow(2, i - 1) % 11;\n\t\t\t\t\tsum += parseInt(ai, 10) * wi;\n\t\t\t\t}\n\t\t\t\tif (1 !== sum % 11) me.errNum = 1; //总和模11应该等于1\n\t\t\t\tsum = sum - parseInt(me.ID.substr[0], 10);\n\t\t\t\tvar checkCodeIndex = sum % 11;\n\t\t\t\tlet c = me.ID.substr(me.ID.length - 1, 1); //最后一位数字\n\t\t\t\tif (c == me.checkCode[checkCodeIndex]) me.errNum = 2; //最后一位校验\n\t\t\t\treturn me.errNum;\n\t\t\t};\n\t\t},\n\t\tgetAge(strAge) {\n\t\t\tvar birArr = strAge.split('-');\n\t\t\tvar birYear = birArr[0];\n\t\t\tvar birMonth = birArr[1];\n\t\t\tvar birDay = birArr[2];\n\n\t\t\td = new Date();\n\t\t\tvar nowYear = d.getFullYear();\n\t\t\tvar nowMonth = d.getMonth() + 1; //记得加1\n\t\t\tvar nowDay = d.getDate();\n\t\t\tvar returnAge;\n\n\t\t\tif (birArr == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar d = new Date(birYear, birMonth - 1, birDay);\n\t\t\tif (d.getFullYear() == birYear && d.getMonth() + 1 == birMonth && d.getDate() == birDay) {\n\t\t\t\tif (nowYear == birYear) {\n\t\t\t\t\treturnAge = 0; //\n\t\t\t\t} else {\n\t\t\t\t\tvar ageDiff = nowYear - birYear; //\n\t\t\t\t\tif (ageDiff > 0) {\n\t\t\t\t\t\tif (nowMonth == birMonth) {\n\t\t\t\t\t\t\tvar dayDiff = nowDay - birDay; //\n\t\t\t\t\t\t\tif (dayDiff < 0) {\n\t\t\t\t\t\t\t\treturnAge = ageDiff - 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturnAge = ageDiff;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar monthDiff = nowMonth - birMonth; //\n\t\t\t\t\t\t\tif (monthDiff < 0) {\n\t\t\t\t\t\t\t\treturnAge = ageDiff - 1;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturnAge = ageDiff;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn '出生日期晚于今天，数据有误'; //返回-1 表示出生日期输入错误 晚于今天\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn returnAge;\n\t\t\t} else {\n\t\t\t\treturn '输入的日期格式错误！';\n\t\t\t}\n\t\t},\n\t\tgetShengxiao(year) {\n\t\t\tlet ssyear = ['子鼠', '丑牛', '寅虎', '卯兔', '辰龙', '巳蛇', '午马', '未羊', '申猴', '酉鸡', '戌狗', '亥猪'];\n\t\t\tlet index = (parseInt(year, 10) - 1984) % 12;\n\t\t\tconsole.log(ssyear[index]);\n\t\t\treturn ssyear[index];\n\t\t},\n\t\tgetXingZuo(month, day) {\n\t\t\tvar constellations = [\n\t\t\t\t{ Start: 121, End: 220, Name: '水平座' },\n\t\t\t\t{ Start: 221, End: 320, Name: '双鱼座' },\n\t\t\t\t{ Start: 321, End: 420, Name: '白羊座' },\n\t\t\t\t{ Start: 421, End: 520, Name: '金牛座' },\n\t\t\t\t{ Start: 521, End: 620, Name: '双子座' },\n\t\t\t\t{ Start: 621, End: 720, Name: '巨蟹座' },\n\t\t\t\t{ Start: 721, End: 820, Name: '狮子座' },\n\t\t\t\t{ Start: 821, End: 920, Name: '处女座' },\n\t\t\t\t{ Start: 921, End: 1020, Name: '天秤座' },\n\t\t\t\t{ Start: 1021, End: 1120, Name: '天蝎座' }\n\t\t\t];\n\t\t\tlet pos = month * 100 + day;\n\t\t\tfor (var i in constellations) {\n\t\t\t\tif (pos >= constellations[i].Start && pos <= constellations[i].End) {\n\t\t\t\t\treturn constellations[i].Name;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetLocation() {\t\n\t\t\tlet province = this.sfz.substr(0, 2) + '0000'\n\t\t\tlet city = this.sfz.substr(0, 4) + '00';\n\t\t\tlet area = this.sfz.substr(0, 6);\n\t\t\tlet result = ''\n\t\t\tuniCloud.callFunction({\n\t\t\t    name: 'getLocations',\n\t\t\t\tdata:{\n\t\t\t\t\t\"province\":province,\n\t\t\t\t\t\"city\":city,\n\t\t\t\t\t\"area\":area,\n\t\t\t\t}\n\t\t\t  })\n\t\t\t  .then(res => {\n\t\t\t\t  console.log(result)\n\t\t\t\t this.sfzInfo.city= res.result\n\t\t\t  })\n\t\t\treturn result\n\t\t},\n\t\tonShareAppMessage(options){\n\t\t\t\n\t\t}\n\t}\n};\n</script>\n\n<style></style>\n"],"sourceRoot":""}